<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gantt Project Manager</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>

<!-- ==================== DASHBOARD VIEW ==================== -->
<div id="dashboard-view">
    <div class="toolbar">
        <span class="toolbar-brand">Gantt PM</span>
        <div class="toolbar-separator"></div>
        <div style="flex:1"></div>
        <button class="btn" onclick="selectWorkspace()" id="btn-workspace" title="Seleziona cartella di lavoro">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
            Cartella
        </button>
    </div>

    <div style="padding: 24px; max-width: 1200px; margin: 0 auto;">
        <div id="workspace-status"></div>

        <div class="dashboard-header">
            <h2>I miei Progetti</h2>
            <div class="dashboard-actions">
                <button class="btn btn-primary" onclick="showNewProjectModal()">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                    Nuovo Progetto
                </button>
                <button class="btn" onclick="importProject()">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                    Importa JSON
                </button>
            </div>
        </div>

        <div id="project-grid"></div>
    </div>
</div>

<!-- ==================== GANTT VIEW ==================== -->
<div id="gantt-view" style="display:none;">
    <div class="toolbar">
        <button class="btn" onclick="backToDashboard()" title="Torna alla dashboard">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
        </button>
        <span class="toolbar-brand">Gantt PM</span>
        <div class="toolbar-separator"></div>
        <span class="toolbar-title" id="gantt-project-title" onclick="showEditProjectModal()" title="Doppio click per modificare"></span>
        <div class="toolbar-separator"></div>

        <!-- Editing -->
        <button class="btn" onclick="showNewPhaseModal()">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
            Fase
        </button>
        <button class="btn" onclick="showNewActivityModal()">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
            Attivit√†
        </button>
        <button class="btn" onclick="showNewMilestoneModal()">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
            Milestone
        </button>

        <div class="toolbar-separator"></div>

        <!-- Export -->
        <button class="btn" onclick="exportSVG()">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
            SVG
        </button>
        <button class="btn" onclick="exportPNG()">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
            PNG
        </button>

        <div class="toolbar-separator"></div>

        <!-- Versioning -->
        <button class="btn" onclick="showNewSnapshotModal()">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
            Snapshot
        </button>
        <button class="btn" id="btn-toggle-baseline" onclick="toggleBaseline()" disabled>
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 20h20"/><path d="M5 20V8l7-5 7 5v12"/></svg>
            Baseline
        </button>
        <button class="btn" onclick="toggleVersionsPanel()">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="12 8 12 12 14 14"/><circle cx="12" cy="12" r="10"/></svg>
            Versioni
        </button>

        <div class="toolbar-separator"></div>
        <button class="btn" onclick="showTodaySettingModal()" id="btn-today-setting" title="Imposta data di riferimento">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
            Oggi
        </button>
    </div>

    <!-- Gantt Chart -->
    <div id="gantt-svg-container"></div>
</div>

<!-- ==================== VERSIONS PANEL ==================== -->
<div id="versions-backdrop" onclick="toggleVersionsPanel()"></div>
<div id="versions-panel">
    <div class="versions-header">
        <h3>Versioni</h3>
        <button class="btn-icon" onclick="toggleVersionsPanel()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
    </div>
    <div id="versions-list"></div>
</div>

<!-- ==================== MODAL ==================== -->
<div id="modal-overlay" onclick="if(event.target===this)closeModal()">
    <div class="modal">
        <div class="modal-header">
            <h3 id="modal-title"></h3>
            <button class="btn-icon" onclick="closeModal()">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
            </button>
        </div>
        <div id="modal-body"></div>
        <div id="modal-footer"></div>
    </div>
</div>

<!-- ==================== TOAST ==================== -->
<div id="toast-container"></div>

<!-- ==================== SCRIPTS ==================== -->
<script src="js/app.js"></script>
<script src="js/utils.js"></script>
<script src="js/workspace.js"></script>
<script src="js/storage.js"></script>
<script src="js/gantt.js"></script>
<script src="js/drag.js"></script>
<script src="js/ui.js"></script>
<script src="js/exporter.js"></script>
<script src="js/actions.js"></script>
<script src="js/main.js"></script>

</body>
</html>
